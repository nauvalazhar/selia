{"version":3,"sources":["../src/lib/check-workspace.ts"],"sourcesContent":["import fs from 'fs/promises';\nimport path from 'path';\nimport { parse } from 'yaml';\n\nexport async function isSinglePackageWorkspace(cwd: string) {\n  return true;\n  try {\n    const wsPath = path.join(cwd, 'pnpm-workspace.yaml');\n    const raw = await fs.readFile(wsPath, 'utf-8');\n    console.log(raw);\n    const ws = parse(raw);\n\n    const packages = ws?.packages ?? [];\n\n    return (\n      packages.length === 1 && (packages[0] === '.' || packages[0] === './')\n    );\n  } catch {\n    return false;\n  }\n}\n\nexport async function isPnpmWorkspaceRoot(cwd: string): Promise<boolean> {\n  try {\n    await fs.access(path.join(cwd, 'pnpm-workspace.yaml'));\n    return true;\n  } catch {\n    return false;\n  }\n}\n"],"mappings":";AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AACjB,SAAS,aAAa;AAEtB,eAAsB,yBAAyB,KAAa;AAC1D,SAAO;AACP,MAAI;AACF,UAAM,SAAS,KAAK,KAAK,KAAK,qBAAqB;AACnD,UAAM,MAAM,MAAM,GAAG,SAAS,QAAQ,OAAO;AAC7C,YAAQ,IAAI,GAAG;AACf,UAAM,KAAK,MAAM,GAAG;AAEpB,UAAM,WAAW,IAAI,YAAY,CAAC;AAElC,WACE,SAAS,WAAW,MAAM,SAAS,CAAC,MAAM,OAAO,SAAS,CAAC,MAAM;AAAA,EAErE,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAEA,eAAsB,oBAAoB,KAA+B;AACvE,MAAI;AACF,UAAM,GAAG,OAAO,KAAK,KAAK,KAAK,qBAAqB,CAAC;AACrD,WAAO;AAAA,EACT,QAAQ;AACN,WAAO;AAAA,EACT;AACF;","names":[]}