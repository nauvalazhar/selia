{"version":3,"sources":["../src/lib/detect-framework.ts"],"sourcesContent":["import fs from 'fs/promises';\nimport path from 'path';\n\nasync function exists(p: string) {\n  try {\n    await fs.access(p);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function detectFramework(\n  cwd: string = process.cwd(),\n): Promise<string> {\n  try {\n    const pkgPath = path.join(cwd, 'package.json');\n    const pkg = JSON.parse(await fs.readFile(pkgPath, 'utf-8'));\n\n    const deps = {\n      ...pkg.dependencies,\n      ...pkg.devDependencies,\n    };\n\n    /* ----------------------------\n     * React meta-frameworks\n     * ---------------------------- */\n\n    if (deps['next']) return 'next';\n\n    // React Router v7 (ex-Remix)\n    if (deps['react-router'] && deps['@react-router/dev']) {\n      return 'react-router';\n    }\n\n    // Remix (legacy but still exists)\n    if (deps['@remix-run/react']) return 'remix';\n\n    // TanStack Start\n    if (deps['@tanstack/start']) return 'tanstack-start';\n\n    // TanStack Router (standalone)\n    if (deps['@tanstack/router']) return 'tanstack-router';\n\n    // Astro\n    if (deps['astro']) return 'astro';\n\n    /* ----------------------------\n     * Vite (needs file hint)\n     * ---------------------------- */\n\n    if (\n      deps['vite'] &&\n      ((await exists(path.join(cwd, 'vite.config.ts'))) ||\n        (await exists(path.join(cwd, 'vite.config.js'))))\n    ) {\n      return 'vite';\n    }\n\n    /* ----------------------------\n     * Laravel (non-Node primary)\n     * ---------------------------- */\n\n    if (\n      (await exists(path.join(cwd, 'artisan'))) &&\n      (await exists(path.join(cwd, 'composer.json')))\n    ) {\n      return 'laravel';\n    }\n\n    /* ----------------------------\n     * Plain React fallback\n     * ---------------------------- */\n\n    if (deps['react']) return 'react';\n\n    return 'unknown';\n  } catch {\n    return 'unknown';\n  }\n}\n"],"mappings":";AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AAEjB,eAAe,OAAO,GAAW;AAC/B,MAAI;AACF,UAAM,GAAG,OAAO,CAAC;AACjB,WAAO;AAAA,EACT,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAEA,eAAsB,gBACpB,MAAc,QAAQ,IAAI,GACT;AACjB,MAAI;AACF,UAAM,UAAU,KAAK,KAAK,KAAK,cAAc;AAC7C,UAAM,MAAM,KAAK,MAAM,MAAM,GAAG,SAAS,SAAS,OAAO,CAAC;AAE1D,UAAM,OAAO;AAAA,MACX,GAAG,IAAI;AAAA,MACP,GAAG,IAAI;AAAA,IACT;AAMA,QAAI,KAAK,MAAM,EAAG,QAAO;AAGzB,QAAI,KAAK,cAAc,KAAK,KAAK,mBAAmB,GAAG;AACrD,aAAO;AAAA,IACT;AAGA,QAAI,KAAK,kBAAkB,EAAG,QAAO;AAGrC,QAAI,KAAK,iBAAiB,EAAG,QAAO;AAGpC,QAAI,KAAK,kBAAkB,EAAG,QAAO;AAGrC,QAAI,KAAK,OAAO,EAAG,QAAO;AAM1B,QACE,KAAK,MAAM,MACT,MAAM,OAAO,KAAK,KAAK,KAAK,gBAAgB,CAAC,KAC5C,MAAM,OAAO,KAAK,KAAK,KAAK,gBAAgB,CAAC,IAChD;AACA,aAAO;AAAA,IACT;AAMA,QACG,MAAM,OAAO,KAAK,KAAK,KAAK,SAAS,CAAC,KACtC,MAAM,OAAO,KAAK,KAAK,KAAK,eAAe,CAAC,GAC7C;AACA,aAAO;AAAA,IACT;AAMA,QAAI,KAAK,OAAO,EAAG,QAAO;AAE1B,WAAO;AAAA,EACT,QAAQ;AACN,WAAO;AAAA,EACT;AACF;","names":[]}