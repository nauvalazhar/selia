{"version":3,"sources":["../src/lib/fetch-item.ts"],"sourcesContent":["import { Item, ItemSchema } from '../schemas/item-schema';\n\nexport async function fetchItem(\n  registryUrl: string,\n  itemName: string,\n): Promise<Item> {\n  const url = `${registryUrl}/${itemName}.json`;\n\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error(`No item found.`);\n      }\n\n      throw new Error(\n        `Failed to fetch item \"${itemName}\" from registry: ${response.statusText}`,\n      );\n    }\n\n    const data = await response.json();\n    return ItemSchema.parse(data);\n  } catch (error) {\n    if (error instanceof Error) {\n      throw new Error(`Failed to fetch item \"${itemName}\": ${error.message}`);\n    }\n    throw error;\n  }\n}\n\nexport async function fetchItems(\n  registryUrl: string,\n  itemNames: string[],\n): Promise<Item[]> {\n  const items = await Promise.all(\n    itemNames.map((name) => fetchItem(registryUrl, name)),\n  );\n  return items;\n}\n"],"mappings":";;;;;AAEA,eAAsB,UACpB,aACA,UACe;AACf,QAAM,MAAM,GAAG,WAAW,IAAI,QAAQ;AAEtC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,GAAG;AAEhC,QAAI,CAAC,SAAS,IAAI;AAChB,UAAI,SAAS,WAAW,KAAK;AAC3B,cAAM,IAAI,MAAM,gBAAgB;AAAA,MAClC;AAEA,YAAM,IAAI;AAAA,QACR,yBAAyB,QAAQ,oBAAoB,SAAS,UAAU;AAAA,MAC1E;AAAA,IACF;AAEA,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,WAAW,MAAM,IAAI;AAAA,EAC9B,SAAS,OAAO;AACd,QAAI,iBAAiB,OAAO;AAC1B,YAAM,IAAI,MAAM,yBAAyB,QAAQ,MAAM,MAAM,OAAO,EAAE;AAAA,IACxE;AACA,UAAM;AAAA,EACR;AACF;AAEA,eAAsB,WACpB,aACA,WACiB;AACjB,QAAM,QAAQ,MAAM,QAAQ;AAAA,IAC1B,UAAU,IAAI,CAAC,SAAS,UAAU,aAAa,IAAI,CAAC;AAAA,EACtD;AACA,SAAO;AACT;","names":[]}