{
  "name": "combobox",
  "type": "component",
  "dependencies": {
    "items": [
      "chip"
    ]
  },
  "files": [
    {
      "name": "combobox.tsx",
      "target": "components",
      "content": "'use client';\r\n\r\nimport * as React from 'react';\r\nimport { Combobox as BaseCombobox } from '@base-ui/react/combobox';\r\nimport { cn } from '#utils';\r\nimport { Chip } from './chip';\r\nimport { cva, type VariantProps } from 'class-variance-authority';\r\n\r\nexport function Combobox({\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Root>) {\r\n  return <BaseCombobox.Root data-slot=\"combobox\" {...props} />;\r\n}\r\n\r\nexport const comboboxTriggerVariants = cva(\r\n  [\r\n    'px-2.5 w-full bg-input rounded placeholder:text-dimmed transition-all',\r\n    'focus:outline-0 focus:ring-primary focus:ring-2',\r\n    'has-focus:ring-primary has-focus:ring-2',\r\n    'flex items-center gap-2.5 cursor-default',\r\n    'data-disabled:opacity-70 data-disabled:pointer-events-none',\r\n  ],\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          'bg-input ring ring-input-border hover:ring-input-accent-border shadow-input',\r\n        subtle:\r\n          'bg-input/60 ring ring-input-border hover:ring-input-accent-border shadow-input',\r\n        plain: 'bg-transparent hover:bg-accent',\r\n      },\r\n      pill: {\r\n        true: 'rounded-full',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      pill: false,\r\n    },\r\n  },\r\n);\r\n\r\nexport function ComboboxTrigger({\r\n  className,\r\n  children,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Trigger> &\r\n  VariantProps<typeof comboboxTriggerVariants>) {\r\n  return (\r\n    <BaseCombobox.Trigger\r\n      data-slot=\"combobox-trigger\"\r\n      {...props}\r\n      role=\"combobox\"\r\n      className={cn('h-9.5', comboboxTriggerVariants({ variant, className }))}\r\n    >\r\n      {children}\r\n      <BaseCombobox.Icon className=\"text-muted ml-auto\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          className=\"w-4\"\r\n        >\r\n          <path d=\"m6 9 6 6 6-6\" />\r\n        </svg>\r\n      </BaseCombobox.Icon>\r\n    </BaseCombobox.Trigger>\r\n  );\r\n}\r\n\r\nexport type ComboboxItem = {\r\n  value: string;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport function ComboboxValue({\r\n  placeholder = 'Select an option',\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Value> & {\r\n  placeholder?: string;\r\n}) {\r\n  return (\r\n    <BaseCombobox.Value data-slot=\"combobox-value\" {...props}>\r\n      {(value: string | ComboboxItem) => (\r\n        <ComboboxRenderValue value={value} placeholder={placeholder} />\r\n      )}\r\n    </BaseCombobox.Value>\r\n  );\r\n}\r\n\r\nfunction ComboboxRenderValue({\r\n  value,\r\n  placeholder,\r\n}: {\r\n  value: string | ComboboxItem;\r\n  placeholder: string;\r\n}) {\r\n  if (!value) {\r\n    return <span className=\"text-dimmed\">{placeholder}</span>;\r\n  }\r\n\r\n  if (typeof value === 'object') {\r\n    return (\r\n      <div className=\"flex items-center gap-2.5 *:[svg]:size-4 *:[svg]:text-popover-foreground\">\r\n        {value.icon}\r\n        <span className=\"text-popover-foreground\">{value.label}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <span className=\"text-popover-foreground\">{value}</span>;\r\n}\r\n\r\nexport function ComboboxInput({\r\n  className,\r\n  placeholder,\r\n  variant,\r\n  pill,\r\n  ref,\r\n}: VariantProps<typeof comboboxTriggerVariants> & {\r\n  placeholder: string;\r\n  className?: string;\r\n  ref?: React.RefObject<HTMLDivElement | null>;\r\n}) {\r\n  return (\r\n    <BaseCombobox.Chips\r\n      data-slot=\"combobox-chips\"\r\n      role=\"combobox\"\r\n      className={cn(\r\n        comboboxTriggerVariants({ variant, pill, className }),\r\n        'min-h-9.5 py-1 flex items-center flex-wrap gap-1.5',\r\n      )}\r\n      ref={ref}\r\n    >\r\n      <BaseCombobox.Value>\r\n        {(value: ComboboxItem[]) => (\r\n          <React.Fragment>\r\n            {value.map((item) => (\r\n              <BaseCombobox.Chip\r\n                key={item.value}\r\n                render={<Chip />}\r\n                className={cn(\r\n                  'focus-visible:outline-none focus-visible:bg-primary focus-visible:text-primary-foreground',\r\n                  'focus-visible:ring-primary',\r\n                )}\r\n              >\r\n                {item.label}\r\n                <BaseCombobox.ChipRemove>\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    className=\"size-3.5 opacity-60 hover:opacity-100 transition-colors\"\r\n                  >\r\n                    <path d=\"M18 6 6 18\" />\r\n                    <path d=\"m6 6 12 12\" />\r\n                  </svg>\r\n                </BaseCombobox.ChipRemove>\r\n              </BaseCombobox.Chip>\r\n            ))}\r\n            <BaseCombobox.Input\r\n              placeholder={value.length === 0 ? placeholder : ''}\r\n              className={cn('min-w-4 flex-1 outline-none')}\r\n            />\r\n          </React.Fragment>\r\n        )}\r\n      </BaseCombobox.Value>\r\n    </BaseCombobox.Chips>\r\n  );\r\n}\r\n\r\nexport function ComboboxPopup({\r\n  className,\r\n  children,\r\n  align,\r\n  alignOffset,\r\n  side,\r\n  sideOffset,\r\n  anchor,\r\n  sticky,\r\n  positionMethod,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Popup> & {\r\n  align?: BaseCombobox.Positioner.Props['align'];\r\n  alignOffset?: BaseCombobox.Positioner.Props['alignOffset'];\r\n  side?: BaseCombobox.Positioner.Props['side'];\r\n  sideOffset?: BaseCombobox.Positioner.Props['sideOffset'];\r\n  anchor?: BaseCombobox.Positioner.Props['anchor'];\r\n  sticky?: BaseCombobox.Positioner.Props['sticky'];\r\n  positionMethod?: BaseCombobox.Positioner.Props['positionMethod'];\r\n}) {\r\n  return (\r\n    <BaseCombobox.Portal>\r\n      <BaseCombobox.Backdrop />\r\n      <BaseCombobox.Positioner\r\n        align={align}\r\n        alignOffset={alignOffset}\r\n        side={side}\r\n        sideOffset={sideOffset || 6}\r\n        anchor={anchor}\r\n        sticky={sticky}\r\n        positionMethod={positionMethod}\r\n      >\r\n        <BaseCombobox.Popup\r\n          data-slot=\"combobox-popup\"\r\n          {...props}\r\n          className={cn(\r\n            'bg-popover ring ring-popover-border rounded shadow-popover',\r\n            'w-(--anchor-width) max-h-[min(var(---available-height),23rem)]',\r\n            'max-w-(--available-width) origin-(--transform-origin)',\r\n            'outline-none transition-[transform,scale,opacity]',\r\n            'data-[ending-style]:opacity-0 data-[ending-style]:scale-90',\r\n            'data-[starting-style]:opacity-0 data-[starting-style]:scale-90',\r\n            'has-[>[data-slot=input-group]]:[&_[data-slot=combobox-search]]:border-none',\r\n            '*:data-[slot=input-group]:border-b *:data-[slot=input-group]:border-popover-separator',\r\n            className,\r\n          )}\r\n        >\r\n          {children}\r\n        </BaseCombobox.Popup>\r\n      </BaseCombobox.Positioner>\r\n    </BaseCombobox.Portal>\r\n  );\r\n}\r\n\r\nexport function ComboboxSearch({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Input>) {\r\n  return (\r\n    <div className=\"p-1\">\r\n      <BaseCombobox.Input\r\n        data-slot=\"combobox-search\"\r\n        placeholder=\"Search item\"\r\n        {...props}\r\n        className={cn(\r\n          'outline-none h-10 px-2.5 w-full border-b border-input-border',\r\n          className,\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ComboboxEmpty({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Empty>) {\r\n  return (\r\n    <BaseCombobox.Empty\r\n      data-slot=\"combobox-empty\"\r\n      {...props}\r\n      className={cn('px-3 py-2.5 text-dimmed empty:p-0 text-center')}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ComboboxList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.List>) {\r\n  return (\r\n    <BaseCombobox.List\r\n      data-slot=\"combobox-list\"\r\n      {...props}\r\n      className={cn(\r\n        'space-y-0.5 outline-none max-h-[min(23rem,var(--available-height))] overflow-y-auto dark:scheme-dark p-1 empty:p-0',\r\n        className,\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ComboboxItem({\r\n  children,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Item>) {\r\n  return (\r\n    <BaseCombobox.Item\r\n      data-slot=\"combobox-item\"\r\n      {...props}\r\n      className={cn(\r\n        'flex items-center text-popover-foreground gap-3.5 py-2.5 px-3 rounded select-none',\r\n        'group-data-[side=none]:min-w-[calc(var(--anchor-width))]',\r\n        'data-[highlighted]:bg-popover-accent data-[selected]:bg-popover-accent',\r\n        'focus-visible:outline-none',\r\n        'data-disabled:opacity-70 data-disabled:pointer-events-none',\r\n        className,\r\n      )}\r\n    >\r\n      {children}\r\n      <BaseCombobox.ItemIndicator className=\"ml-auto\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"3\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          className=\"size-4 text-primary\"\r\n        >\r\n          <path d=\"M20 6 9 17l-5-5\" />\r\n        </svg>\r\n      </BaseCombobox.ItemIndicator>\r\n    </BaseCombobox.Item>\r\n  );\r\n}\r\n\r\nexport function ComboboxGroup({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Group>) {\r\n  return (\r\n    <BaseCombobox.Group\r\n      data-slot=\"combobox-group\"\r\n      {...props}\r\n      className={cn('space-y-0.5', className)}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ComboboxGroupLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.GroupLabel>) {\r\n  return (\r\n    <BaseCombobox.GroupLabel\r\n      data-slot=\"combobox-group-label\"\r\n      {...props}\r\n      className={cn('px-2.5 py-1.5 text-sm font-medium text-dimmed', className)}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ComboboxSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Separator>) {\r\n  return (\r\n    <BaseCombobox.Separator\r\n      data-slot=\"combobox-separator\"\r\n      {...props}\r\n      className={cn('h-px my-1 bg-popover-separator', className)}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ComboboxCollection({\r\n  ...props\r\n}: React.ComponentProps<typeof BaseCombobox.Collection>) {\r\n  return <BaseCombobox.Collection {...props} />;\r\n}\r\n"
    }
  ]
}